(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[824],{4097:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return S}});var r=n(266),o=n(809),i=n.n(o),s=n(7294),a=n(8447),c=n(7735),l=n(9163),u=l.ZP.div.withConfig({displayName:"ticketsstyles__Screen",componentId:"sc-12ykp0w-0"})(["position:absolute;left:45px;margin-top:70px;animation:screen 3s forwards;animation-direction:normal;@keyframes screen{0%{top:0px;}100%{top:0px;}}"]),p=l.ZP.img.withConfig({displayName:"ticketsstyles__Scanlines",componentId:"sc-12ykp0w-1"})(["position:absolute;left:5px;bottom:15px;"]),d=l.ZP.img.withConfig({displayName:"ticketsstyles__Arm",componentId:"sc-12ykp0w-2"})(["position:absolute;left:555px;animation:arm 4s forwards;animation-direction:normal;@keyframes arm{0%{top:-175px;}100%{top:50px;}}"]),f=l.ZP.div.withConfig({displayName:"ticketsstyles__LoadCharacter",componentId:"sc-12ykp0w-3"})(["position:absolute;left:779px;top:331px;width:78px;height:108px;background:url('/static/images/tickets/ticketsProgressBackground.png') no-repeat center;"]),h=l.ZP.img.withConfig({displayName:"ticketsstyles__LoadMask",componentId:"sc-12ykp0w-4"})(["position:relative;width:100%;height:100%;"]),g=l.ZP.div.withConfig({displayName:"ticketsstyles__LoadAnimation",componentId:"sc-12ykp0w-5"})(["position:absolute;width:100%;animation:load 10s forwards;animation-direction:normal;background:#59cf93;@keyframes load{0%{height:0px;}100%{height:100%;}}"]),k=l.ZP.div.withConfig({displayName:"ticketsstyles__ProtoContainer",componentId:"sc-12ykp0w-6"})(["position:absolute;left:0px;bottom:15px;width:100%;height:300px;background:rgba(255,255,255,0.5);display:flex;align-items:flex-start;padding:8px;gap:16px;"]),m=l.ZP.div.withConfig({displayName:"ticketsstyles__UserInfo",componentId:"sc-12ykp0w-7"})(["display:flex;flex-direction:column;width:100%;font-size:16px;height:100%;overflow:auto;"]),w=l.ZP.button.withConfig({displayName:"ticketsstyles__TicketButton",componentId:"sc-12ykp0w-8"})(["width:fit-content;height:fit-content;min-height:40px;background:#59cf93;border:none;border-radius:4px;color:#fff;font-size:16px;font-weight:600;cursor:pointer;transition:0.3s;:hover{background:#4abf85;}:hover:active:enabled{background:#3ab075;transform:scale(0.98);}:disabled{background:#b8b8b8;cursor:not-allowed;}"]),x=n(4155),_=n(5893),v=a.connect,y=a.WalletConnection,b=a.Contract,I=(x.env.NEXT_PUBLIC_VERSION,"cottonbottom.testnet"),N=function(){var t=(0,s.useState)(null),e=t[0],n=t[1],o=(0,s.useState)(null),l=o[0],N=o[1],S=(0,s.useState)(null),j=S[0],C=S[1],P=(0,s.useState)(!1),U=P[0],Z=P[1],E=(0,s.useState)([]),T=E[0],A=E[1],L=(0,s.useState)(""),O=L[0],F=L[1],B=(0,s.useState)([]),q=B[0],X=B[1];(0,s.useEffect)((function(){(function(){var t=(0,r.Z)(i().mark((function t(){var e,r,o,s,c;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window){t.next=9;break}return e=a.keyStores,r=new e.BrowserLocalStorageKeyStore,x.env.NEXT_PUBLIC_VERSION,s={networkId:(o={networkId:"testnet",nodeUrl:"https://rpc.testnet.near.org",walletUrl:"https://wallet.testnet.near.org",helperUrl:"https://helper.testnet.near.org",explorerUrl:"https://explorer.testnet.near.org"}).networkId,keyStore:r,nodeUrl:o.nodeUrl,walletUrl:o.walletUrl,helperUrl:o.helperUrl,explorerUrl:o.explorerUrl},t.next=7,v(s);case 7:c=t.sent,n(c);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),(0,s.useEffect)((function(){if(!l&&e){var t=new y(e,"nft-test");N(t)}}),[e]),(0,s.useEffect)((function(){if(l&&e){var t=new b(l.account(),I,{viewMethods:["nft_tokens_for_owner"],changeMethods:["nft_get_random_nft"]});C(t)}}),[l,e]);var M=function(){var t=(0,r.Z)(i().mark((function t(){var n,r,o,s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(l&&e&&j)){t.next=9;break}return n=l.getAccountId(),r={account_id:n},t.next=5,j.nft_tokens_for_owner(r);case 5:o=t.sent,console.log("the response",o),s=o.map((function(t){return{id:t.token_id}})),X(s);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),R=function(){var t=(0,r.Z)(i().mark((function t(){var n,r,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(l&&e&&j)){t.next=7;break}return n={account_id:I},t.next=4,j.nft_tokens_for_owner(n);case 4:r=t.sent,o=r.map((function(t){return{id:t.token_id}})),A(o);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();(0,s.useEffect)((function(){l&&j&&(Z(l.isSignedIn()),M(),R())}),[l,j]);var z=function(){var t=(0,r.Z)(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("login"),l&&l.requestSignIn({contractId:I});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),V=function(){var t=(0,r.Z)(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("logout"),l&&(l.signOut(),Z(l.isSignedIn()));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,_.jsxs)(c.Z,{page:"Tickets",children:[(0,_.jsxs)(u,{children:[(0,_.jsx)("img",{src:"/static/images/tickets/ticketsInterface.png",alt:"Screen"}),(0,_.jsx)(p,{src:"/static/images/tickets/ticketsScanlines.png",alt:"Screen"}),(0,_.jsxs)(k,{children:[U?(0,_.jsx)(w,{onClick:V,children:"Logout"}):(0,_.jsx)(w,{onClick:z,children:"Login"}),U&&l&&(0,_.jsxs)(m,{children:[(0,_.jsx)("div",{children:l.getAccountId()}),(0,_.jsx)("div",{children:"Owned NFTs:"}),(0,_.jsx)("ul",{children:q.map((function(t){return(0,_.jsx)("li",{children:t.id},t.id)}))}),O&&(0,_.jsx)("div",{children:O}),(0,_.jsxs)("div",{children:["Available NFTs: ",T.length]})]}),U&&l&&(0,_.jsx)(w,{onClick:function(){if(console.log("request nft"),l&&j){var t={args:{receiver_id:l.getAccountId()},amount:5};j.nft_get_random_nft(t).then((function(t){console.log("requesting NFTs:",t);var e=t.map((function(t){return{id:t.token_id}}));X(e)})).catch((function(t){F(t.toString())}))}},disabled:q.length>0||0===T.length,children:q.length>0?"You already have an NFT":T.length>0?"Request NFT":"No NFTs available"})]})]}),(0,_.jsx)(d,{src:"/static/images/tickets/ticketsAssemblerArm.png",alt:"Screen"}),(0,_.jsxs)(f,{children:[(0,_.jsx)(g,{}),(0,_.jsx)(h,{src:"/static/images/tickets/ticketsProgressOverlay.png",alt:"Screen"})]})]})},S=function(){return(0,_.jsx)(N,{})}},6656:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tickets",function(){return n(4097)}])},6601:function(){},2361:function(){},4616:function(){},5024:function(){}},function(t){t.O(0,[288,735,774,888,179],(function(){return e=6656,t(t.s=e);var e}));var e=t.O();_N_E=e}]);