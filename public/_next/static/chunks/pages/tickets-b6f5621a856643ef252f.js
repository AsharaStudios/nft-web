(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[824],{369:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return S}});var o=n(266),i=n(809),r=n.n(i),s=n(7294),c=n(8447),a=n(7735),u=n(9163),l=u.ZP.div.withConfig({displayName:"ticketsstyles__Screen",componentId:"sc-12ykp0w-0"})(["position:absolute;left:45px;margin-top:70px;animation:screen 3s forwards;animation-direction:normal;@keyframes screen{0%{top:0px;}100%{top:0px;}}"]),p=u.ZP.img.withConfig({displayName:"ticketsstyles__Scanlines",componentId:"sc-12ykp0w-1"})(["position:absolute;left:5px;bottom:15px;"]),d=u.ZP.img.withConfig({displayName:"ticketsstyles__Arm",componentId:"sc-12ykp0w-2"})(["position:absolute;left:555px;animation:arm 4s forwards;animation-direction:normal;@keyframes arm{0%{top:-175px;}100%{top:50px;}}"]),f=u.ZP.div.withConfig({displayName:"ticketsstyles__LoadCharacter",componentId:"sc-12ykp0w-3"})(["position:absolute;left:779px;top:331px;width:78px;height:108px;background:url('/static/images/tickets/ticketsProgressBackground.png') no-repeat center;"]),g=u.ZP.img.withConfig({displayName:"ticketsstyles__LoadMask",componentId:"sc-12ykp0w-4"})(["position:relative;width:100%;height:100%;"]),h=u.ZP.div.withConfig({displayName:"ticketsstyles__LoadAnimation",componentId:"sc-12ykp0w-5"})(["position:absolute;width:100%;animation:load 10s forwards;animation-direction:normal;background:#59cf93;@keyframes load{0%{height:0px;}100%{height:100%;}}"]),k=u.ZP.div.withConfig({displayName:"ticketsstyles__ProtoContainer",componentId:"sc-12ykp0w-6"})(["position:absolute;left:0px;bottom:15px;width:100%;height:300px;background:rgba(255,255,255,0.5);display:flex;align-items:flex-start;padding:8px;gap:16px;"]),m=u.ZP.div.withConfig({displayName:"ticketsstyles__UserInfo",componentId:"sc-12ykp0w-7"})(["display:flex;flex-direction:column;width:100%;font-size:16px;height:100%;overflow:auto;"]),w=u.ZP.button.withConfig({displayName:"ticketsstyles__TicketButton",componentId:"sc-12ykp0w-8"})(["width:fit-content;height:40px;background:#59cf93;border:none;border-radius:4px;color:#fff;font-size:16px;font-weight:600;cursor:pointer;transition:0.3s;:hover{background:#4abf85;}:hover:active:enabled{background:#3ab075;transform:scale(0.98);}:disabled{background:#b8b8b8;cursor:not-allowed;}"]),x=n(5893),_=c.connect,v=c.WalletConnection,y=c.Contract,b=function(){var t=(0,s.useState)(null),e=t[0],n=t[1],i=(0,s.useState)(null),u=i[0],b=i[1],S=(0,s.useState)(null),N=S[0],j=S[1],I=(0,s.useState)(!1),C=I[0],Z=I[1],P=(0,s.useState)([]),T=P[0],E=P[1],A=(0,s.useState)(""),F=A[0],L=A[1],O=(0,s.useState)([]),U=O[0],q=O[1];(0,s.useEffect)((function(){(function(){var t=(0,o.Z)(r().mark((function t(){var e,o,i,s;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window){t.next=8;break}return e=c.keyStores,o=new e.BrowserLocalStorageKeyStore,i={networkId:"testnet",keyStore:o,nodeUrl:"https://rpc.testnet.near.org",walletUrl:"https://wallet.testnet.near.org",helperUrl:"https://helper.testnet.near.org",explorerUrl:"https://explorer.testnet.near.org"},t.next=6,_(i);case 6:s=t.sent,n(s);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),(0,s.useEffect)((function(){if(!u&&e){var t=new v(e,"nft-test");b(t)}}),[e]),(0,s.useEffect)((function(){if(u&&e){var t=new y(u.account(),"cottonbottom.testnet",{viewMethods:["nft_tokens_for_owner"],changeMethods:["nft_get_random_nft"]});j(t)}}),[u,e]);var B=function(){var t=(0,o.Z)(r().mark((function t(){var n,o,i,s;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(u&&e&&N)){t.next=9;break}return n=u.getAccountId(),o={account_id:n},t.next=5,N.nft_tokens_for_owner(o);case 5:i=t.sent,console.log("the response",i),s=i.map((function(t){return{id:t.token_id}})),q(s);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),M=function(){var t=(0,o.Z)(r().mark((function t(){var n,o,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(u&&e&&N)){t.next=7;break}return n={account_id:"cottonbottom.testnet"},t.next=4,N.nft_tokens_for_owner(n);case 4:o=t.sent,i=o.map((function(t){return{id:t.token_id}})),E(i);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();(0,s.useEffect)((function(){u&&N&&(Z(u.isSignedIn()),B(),M())}),[u,N]);var z=function(){var t=(0,o.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("login"),u&&u.requestSignIn({contractId:"cottonbottom.testnet"});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),X=function(){var t=(0,o.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("logout"),u&&(u.signOut(),Z(u.isSignedIn()));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,x.jsxs)(a.Z,{page:"Tickets",children:[(0,x.jsxs)(l,{children:[(0,x.jsx)("img",{src:"/static/images/tickets/ticketsInterface.png",alt:"Screen"}),(0,x.jsx)(p,{src:"/static/images/tickets/ticketsScanlines.png",alt:"Screen"}),(0,x.jsxs)(k,{children:[C?(0,x.jsx)(w,{onClick:X,children:"Logout"}):(0,x.jsx)(w,{onClick:z,children:"Login"}),C&&u&&(0,x.jsxs)(m,{children:[(0,x.jsx)("div",{children:u.getAccountId()}),(0,x.jsx)("div",{children:"Owned NFTs:"}),(0,x.jsx)("ul",{children:U.map((function(t){return(0,x.jsx)("li",{children:t.id},t.id)}))}),F&&(0,x.jsx)("div",{children:F}),(0,x.jsxs)("div",{children:["Available NFTs: ",T.length]})]}),C&&u&&(0,x.jsx)(w,{onClick:function(){if(console.log("request nft"),u&&N){var t={args:{receiver_id:u.getAccountId()},amount:5};N.nft_get_random_nft(t).then((function(t){console.log("requesting NFTs:",t);var e=t.map((function(t){return{id:t.token_id}}));q(e)})).catch((function(t){L(t.toString())}))}},disabled:U.length>0||0===T.length,children:U.length>0?"You already have an NFT":T.length>0?"Request NFT":"No NFTs available"})]})]}),(0,x.jsx)(d,{src:"/static/images/tickets/ticketsAssemblerArm.png",alt:"Screen"}),(0,x.jsxs)(f,{children:[(0,x.jsx)(h,{}),(0,x.jsx)(g,{src:"/static/images/tickets/ticketsProgressOverlay.png",alt:"Screen"})]})]})},S=function(){return(0,x.jsx)(b,{})}},6656:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tickets",function(){return n(369)}])},6601:function(){},2361:function(){},4616:function(){},5024:function(){}},function(t){t.O(0,[288,735,774,888,179],(function(){return e=6656,t(t.s=e);var e}));var e=t.O();_N_E=e}]);