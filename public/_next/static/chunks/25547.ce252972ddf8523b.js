"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[25547],{25547:function(e,t,i){i.d(t,{upload:function(){return o}});var r=i(46126),n=i(75100),a=i(6184);function f(e){return globalThis.File&&e instanceof File}function l(e){return!!(e&&e.name&&e.data&&"string"==typeof e.name&&("string"==typeof e.data||(0,a.lq)(e.data)))}function s(e){return f(e)||(0,a.lq)(e)||l(e)}async function o(e){let t;if(!e.files.length)return[];if(e.files.map(e=>s(e)||"string"==typeof e).every(e=>!!e))t=e.files;else{let i=e.files,r=function e(t,i=[]){if(s(t))return i.push(t),i;if("object"==typeof t){if(!t)return i;Array.isArray(t)?t.forEach(t=>e(t,i)):Object.keys(t).map(r=>e(t[r],i))}return i}(i=function e(t){return"string"==typeof t?function(e){if(e.includes("/ipfs/")){let t=e.split("/ipfs/")[1];return`ipfs://${t}`}return e}(t):"object"==typeof t?!t||s(t)?t:Array.isArray(t)?t.map(t=>e(t)):Object.fromEntries(Object.entries(t).map(([t,i])=>[t,e(i)])):t}(i));r.length&&(i=function e(t,i){if(s(t)){if(i.length)return t=i.shift();console.warn("Not enough URIs to replace all files in object.")}return"object"==typeof t&&t?Array.isArray(t)?t.map(t=>e(t,i)):Object.fromEntries(Object.entries(t).map(([t,r])=>[t,e(r,i)])):t}(i,await o({...e,files:r}))),t=i.map(e=>"string"==typeof e?e:(0,n.P)(e))}let{fileNames:u,form:p}=function(e,t,i){let r=new Map,n=[];for(let s=0;s<t.length;s++){let o=t[s],u="",p=o;if(f(o)){if(i?.rewriteFileNames){let e="";if(o.name){let t=o.name.lastIndexOf(".");t>-1&&(e=o.name.substring(t))}u=`${s+i.rewriteFileNames.fileStartNumber}${e}`}else u=`${o.name}`}else l(o)?(p=o.data,u=i?.rewriteFileNames?`${s+i.rewriteFileNames.fileStartNumber}`:`${o.name}`):u=i?.rewriteFileNames?`${s+i.rewriteFileNames.fileStartNumber}`:`${s}`;let m=i?.uploadWithoutDirectory?"files":`files/${u}`;if(r.has(u)){if(function(e,t){if(f(e)&&f(t)){if(e.name===t.name&&e.lastModified===t.lastModified&&e.size===t.size)return!0}else if((0,a.lq)(e)&&(0,a.lq)(t))return(0,a.AY)(e,t);else if(l(e)&&l(t)&&e.name===t.name){if("string"==typeof e.data&&"string"==typeof t.data)return e.data===t.data;if((0,a.lq)(e.data)&&(0,a.lq)(t.data))return(0,a.AY)(e.data,t.data)}return!1}(r.get(u),o)){n.push(u);continue}throw Error(`[DUPLICATE_FILE_NAME_ERROR] File name ${u} was passed for more than one different file.`)}r.set(u,o),n.push(u),e.append("file",new Blob([p]),m)}let s={name:"Storage SDK",keyvalues:{...i?.metadata}};return e.append("pinataMetadata",JSON.stringify(s)),i?.uploadWithoutDirectory&&e.append("pinataOptions",JSON.stringify({wrapWithDirectory:!1})),{form:e,fileNames:n.map(e=>encodeURIComponent(e))}}(new FormData,t,e),m=(0,r.t)();if("browser"===m){let{uploadBatchBrowser:t}=await i.e(20230).then(i.bind(i,20230));return await t(e.client,p,u,e)}if("node"===m){let{uploadBatchNode:t}=await i.e(71284).then(i.bind(i,71284));return t(e.client,p,u,e)}throw Error("Please, use the uploadMobile function in mobile environments.")}}}]);